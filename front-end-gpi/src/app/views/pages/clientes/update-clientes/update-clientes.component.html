<nav class="page-breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a routerLink="/clientes">Clientes</a></li>
    <li class="breadcrumb-item active" aria-current="page">Editar</li>
  </ol>
  <div class="spinner-wrapper " style="display: none;" id="con_spinner" name="con_spinner">
    <div class="spinner"></div>
  </div>
</nav>
<div class="row justify-content-center" id="occ">
  <div class="col-md-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h6 class="card-title">Editar Cliente</h6>
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
          <div class="form-row">

            <div class="form-group col-sm-12 col-md-6">
              <label for="nomenclatura">Nomenclatura</label>
              <input [(ngModel)]="cliente.nomenclatura"
              [ngClass]="{'is-invalid': submitted && f.nomenclatura.errors}"
              formControlName="nomenclatura"
              type="text" 
              minlength="2"
              maxlength="6"
              class="form-control" 
              id="nomenclatura" 
              name="nomenclatura"
              autocomplete="off"
              placeholder="Nomenclatura"
              oninput="javascript:this.value=this.value.toUpperCase();"/>
              <div class="invalid-feedback" *ngIf="submitted && f.nomenclatura.errors">
                <div *ngIf="f.nomenclatura.errors.required">
                  Este campo es requerido.
                </div>
                <div *ngIf="f.nomenclatura.errors.maxlength">
                  Este campo debe tener como máximo 6 caracteres.
                </div>
                <div *ngIf="f.nomenclatura.errors.minlength">
                  Este campo debe tener como mínimo 2 caracteres.
                </div>
                <div *ngIf="f.nomenclatura.errors.pattern">
                  No se aceptan números o caracteres especiales.
                </div>
              </div>
              <small *ngIf="errorMsj1">{{ errorMsj1 }}</small>
            </div>

            <div class="form-group col-sm-12 col-md-6">
              <label for="sector">Sector Economico</label>
              <select [(ngModel)]="cliente.sector.id" 
              [ngClass]="{'is-invalid': submitted && f.sector.errors}"
              formControlName="sector" 
              id="sector"
              name="sector"
              class="form-control"
              autocomplete="off">
                <option *ngFor="let s of sectores" [ngValue]="s.id">{{ s.sector }}</option>
              </select>
              <div class="invalid-feedback" *ngIf="submitted && f.sector.errors">
                <div class="container-error-message" *ngIf="f.sector.errors.required">
                  Este campo es requerido.
                </div>
              </div>
            </div>

          </div>
          <div class="form-row">

            <div class="form-group col-sm-12 col-md-7">
              <label for="nombre">Nombre Cliente</label>
              <input [(ngModel)]="cliente.nombre"
              [ngClass]="{'is-invalid': submitted && f.nombre.errors}"
              formControlName="nombre" 
              type="text" 
              minlength="2"
              maxlength="50"
              class="form-control" 
              id="nombre" 
              name="nombre"
              autocomplete="off" 
              placeholder="Nombre Cliente"
              oninput="javascript:this.value=this.value.toUpperCase();"/>
              <div class="invalid-feedback" *ngIf="submitted && f.nombre.errors">
                <div *ngIf="f.nombre.errors.required">
                  Este campo es requerido.
                </div>
                <div *ngIf="f.nombre.errors.maxlength">
                  Este campo debe tener como máximo 50 caracteres.
                </div>
                <div *ngIf="f.nombre.errors.minlength">
                  Este campo debe tener como mínimo 2 caracteres.
                </div>
                <div *ngIf="f.nombre.errors.pattern">
                  No se aceptan números o caracteres especiales.
                </div>
              </div>
            </div>

            <div class="form-group col-sm-12 col-md-5">
              <label for="nit">NIT</label>
              <input [(ngModel)]="cliente.nit" 
              formControlName="nit" 
              type="text" 
              autocomplete="off"
              minlength="5" 
              maxlength="20"
              class="form-control" 
              id="nit" 
              name="nit"
              placeholder="Nit"/>
            </div>

          </div>
          <div class="form-row">

            <div class="form-group col-sm-12 col-md-8">
              <label for="gerenteCuenta">Gerente de Cuenta</label>
              <select [(ngModel)]="cliente.gerenteCuenta.id"
              [ngClass]="{'is-invalid': submitted && f.gerenteCuenta.errors}"
              formControlName="gerenteCuenta" 
              name="gerenteCuenta" 
              id="gerenteCuenta"
              class="form-control"
              autocomplete="off">
              <option [ngValue]="undefined" [disabled]="true" [hidden]="true">Seleccione una opción</option>
                <option *ngFor="let g of directores" [ngValue]="g.id">{{ g.nombre }}</option>
              </select>
              <div class="invalid-feedback" *ngIf="submitted && f.gerenteCuenta.errors">
                <div *ngIf="f.gerenteCuenta.errors.required">
                  Este campo es requerido.
                </div>
              </div>
            </div>

            <div class="form-group col-sm-12 col-md-4">
              <label for="estado">Estado</label>
              <select [(ngModel)]="cliente.estado.id" 
              [ngClass]="{'is-invalid': submitted && f.estado.errors}"
              formControlName="estado" 
              name="estado" 
              id="estado"
              class="form-control"
              autocomplete="off">
                <option *ngFor="let e of estados" [ngValue]="e.id">{{ e.estado }}</option>
              </select>
              <div class="invalid-feedback" *ngIf="submitted && f.estado.errors">
                <div *ngIf="f.estado.errors.required">
                  Este campo es requerido.
                </div>
              </div>
            </div>

          </div>
          <button type="submit" id="btnGuardar" class="btn btn-primary">Guardar</button>
          <button routerLink="/clientes" id="btnCancelar" class="btn btn-light">Cancelar</button>
        </form>
      </div>
    </div>
  </div>
</div>
